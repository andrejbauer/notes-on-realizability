\chapter{Realizability and type theory}
\label{cha:type-theory-real}

\section{Families of assemblies}
\label{sec:families-assemblies}

In everyday mathematics \emph{parametrized} sets are commonplace. For
example, when a mathematical text says ``consider a continuous map $f
: [a,b] \to \RR$ where $a < b$ are real numbers'', there is an
implicit use of the parametrized set $[a,b] = \set{x \in \RR \such a
  \leq x \leq b}$, where $a$ and $b$ are the parameters. In general, a
parametrized set $(T_i)_{i \in I}$ is given by an \defemph{index set~$I$}
and a correspondence which assigns a set $T_i$ to each $i \in I$. This
is also known as a \defemph{family} of sets.

We would like a corresponding notion of parametrized assemblies. One
possibility is to take a family $(\asm{S}_i)_{i \in I}$ of assemblies
$\asm{S}_i$ indexed by a \emph{set}~$I$. This is known as an
\emph{external} family of assemblies, because the index set~$I$ is not
an assembly. We would prefer the index $i$ to range over an assembly.
This works out well if we also impose a uniformity condition on the
assemblies $\asm{S}_i$.

\begin{definition}
  A \defemph{uniform family} of assemblies $(\asm{S}_i)_{i \in \asm{I}}$
  is given by an \defemph{index assembly~$\asm{I}$}, and for each $i \in
  I$ an assembly $\asm{S}_i = \xasm{S_i}$, such that $\T{S_i} = \T{S_j}$
  for all $i, j \in I$.
\end{definition}

We only consider uniform families $(\asm{S}_i)_{i \in \asm{I}}$, and
write the underlying type of $\asm{S}_i$'s as $\T{S}$. From an
implementation point of view uniformity is a reasonable condition.


\section{Dependent sums and products}
\label{sec:depend-sums-prod}


Given a uniform family $(\asm{S}_i)_{i \in \asm{I}}$, we may form the
\defemph{dependent sum}
%
\begin{equation*}
  \dsum_{i \in \asm{I}} \asm{S}_i =
  (\dsum_{i \in I} S_i, \T{I} \times \T{S}, \rz[\dsum_{i \in I S_i}])
\end{equation*}
%
where $\dsum_{i \in I} S_i = \set{(i,x) \such i \in I \land x \in
  S_i}$ is the disjoint sum of the sets $S_i$ and
%
\begin{equation*}
  \combPair\;\R{i}\;\R{x} \rz[\dsum_{i \in I S_i}] (i, x)
  \iff
  \R{i} \rz[I] i
  \land
  x \in S_i
  \land
  \R{x} \rz[S_i] x.  
\end{equation*}
%
Similarly, we may form the \defemph{dependent product} of a uniform
family $(\asm{S}_i)_{i \in \asm{I}}$. First recall that the
set-theoretic product of the family of \emph{sets} $(S_i)_{i \in I}$
is
%
\begin{equation*}
  \dprod_{i \in I} S_i =
  \set{f : I \to \tbigcup_{i \in I} S_i \such
    \all{i}{I}{f(i) \in S_i}
  }.
\end{equation*}
%
Let $\rz[\dprod_{i \in I S_i}]$ be the relation between $\Atyp{\T{I}
  \to \T{S}}$ and $\dprod_{i \in I} S_i$, defined by
%
\begin{equation*}
  \R{f} \rz[\dprod_{i \in I S_i}] f
  \iff
  \all{\R{i}}{\Atyp{\T{I}}}{
    \all{i \in I}
      (\R{i} \rz[I] i
      \implies
      \defined{\R{f}\;\R{i}} \land
      \R{f}\;\R{i} \rz[S_i] f(i))
  }.
\end{equation*}
%
Finally, define the dependent product of the family to be the assembly
%
\begin{equation*}
  \dprod_{i \in \asm{I}} \asm{S}_i =
  (\set{f \in \dprod_{i \in I} S_i \such
    \some{\R{f}}{\Atyp{\T{I} \to \T{S}}}{\R{f} \rz[\dprod_{i \in I S_i}]
      f}},
  \T{I} \to \T{S}, {\rz[\dprod_{i \in I S_i}]}).
\end{equation*}
%
Notice how at the level of underlying types the dependency on the
parameter~$i$ disappears because we required the families to be
uniform. This is fortunate, as most programming languages are not
equipped with dependent types.

The dependent sums and products have their universal properties which
are somewhat complicated to state. Suffice it to say that they are the
constructions needed to show that $\AsmA$ is \defemph{locally
  cartesian-closed (lccc)}, cf.\ \sidecite{background-lccc}.

\section{Identity types}
\label{sec:identity-types}

\subsection{UIP and equality reflection}
\label{sec:uip-equal-refl}

\subsection{An intensional model}
\label{sec:an-intensional-model}



\section{Inductive and coinductive types}
\label{sec:inductive-counductive-types}


\section{Propositional truncation}
\label{sec:prop-trunc}

\subsection{Logic from type theory}
\label{sec:logic-from-type}

\section{Universes}
\label{sec:universes}

\subsection{Universes of propositions}
\label{sec:universe-propositions}

The universe of decidable propositions.

The universe of semi-decidable propositions.

The universe of stable propositions.

The universe of propositions.

\subsection{The universe of modest sets}
\label{sec:universe-modest-sets}

\subsection{The universe of small assemblies}
\label{sec:univ-small-assembl}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "notes-on-realizability"
%%% End:
